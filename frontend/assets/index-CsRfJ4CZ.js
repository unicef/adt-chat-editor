import{r,a as v,j as e,t}from"./index-DTf288xY.js";import{c as g,B as x,L as j,I as y,A as N}from"./AxiosInstance-CSILGNeQ.js";import{C as k,a as C}from"./card-DNNhlwbE.js";import{c as I,C as w}from"./check-oNzHQlFm.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],b=I("copy",L);function U(){const[a,m]=r.useState(""),[n,i]=r.useState(!1),[u,o]=r.useState(!1),{token:c}=v(),h=async()=>{var l,d;if(!c){t.error("Authentication token is missing");return}i(!0);try{const s=await N.post("/auth/generate-link",{},{headers:{Authorization:`Bearer ${c}`}});console.log("response",s),s.data.frontend_url?(m(s.data.frontend_url),t.success("Invite link generated successfully")):t.error("No invite URL received from server")}catch(s){console.error("Generate link error:",s);const f=((d=(l=s.response)==null?void 0:l.data)==null?void 0:d.message)||"Failed to generate invite link. Please try again.";t.error(f)}finally{i(!1)}},p=async()=>{if(!a){t.error("No invite URL to copy");return}await navigator.clipboard.writeText(a),o(!0),t.success("Invite link copied to clipboard"),setTimeout(()=>o(!1),2e3)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsx("div",{className:g("flex flex-col gap-6","w-full max-w-md"),children:e.jsx(k,{className:"overflow-hidden",children:e.jsx(C,{className:"p-0",children:e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Generate Invite Link"}),e.jsx("p",{className:"text-muted-foreground text-balance",children:"Create an invite link for temporary users"})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx(x,{onClick:h,className:"w-full",disabled:n,children:n?"Generating...":"Generate Invite Link"}),a&&e.jsxs("div",{className:"grid gap-3",children:[e.jsx(j,{htmlFor:"invite-url",children:"Generated Invite Link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{id:"invite-url",type:"text",value:a,readOnly:!0,className:"bg-gray-50"}),e.jsx(x,{variant:"outline",size:"icon",onClick:p,className:"shrink-0",title:"Copy to clipboard",children:u?e.jsx(w,{className:"h-4 w-4 text-green-600"}):e.jsx(b,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share this link with temporary users to give them access"})]})]})]})})})})})})}export{U as default};
