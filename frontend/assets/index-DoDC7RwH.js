import{u as g,r,a as j,j as e,t}from"./index-6kcS5NM7.js";import{c as N,B as n,L as y,I as k,A as C}from"./AxiosInstance-BS3F7kwY.js";import{C as w,a as I}from"./card-DatusseW.js";import{c as L,C as b}from"./check-FfxgcpKZ.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],A=L("copy",G);function z(){const m=g(),[a,u]=r.useState(""),[i,o]=r.useState(!1),[p,l]=r.useState(!1),{token:c}=j(),h=async()=>{var d,x;if(!c){t.error("Authentication token is missing");return}o(!0);try{const s=await C.post("/auth/generate-link",{},{headers:{Authorization:`Bearer ${c}`}});console.log("response",s),s.data.frontend_url?(u(s.data.frontend_url),t.success("Invite link generated successfully")):t.error("No invite URL received from server")}catch(s){console.error("Generate link error:",s);const v=((x=(d=s.response)==null?void 0:d.data)==null?void 0:x.message)||"Failed to generate invite link. Please try again.";t.error(v)}finally{o(!1)}},f=async()=>{if(!a){t.error("No invite URL to copy");return}await navigator.clipboard.writeText(a),l(!0),t.success("Invite link copied to clipboard"),setTimeout(()=>l(!1),2e3)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsx("div",{className:N("flex flex-col gap-6","w-full max-w-md"),children:e.jsx(w,{className:"overflow-hidden",children:e.jsx(I,{className:"p-0",children:e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Generate Invite Link"}),e.jsx("p",{className:"text-muted-foreground text-balance",children:"Create an invite link for temporary users"})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx(n,{onClick:h,className:"w-full",disabled:i,children:i?"Generating...":"Generate Invite Link"}),a&&e.jsxs("div",{className:"grid gap-3",children:[e.jsx(y,{htmlFor:"invite-url",children:"Generated Invite Link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{id:"invite-url",type:"text",value:a,readOnly:!0,className:"bg-gray-50"}),e.jsx(n,{variant:"outline",size:"icon",onClick:f,className:"shrink-0",title:"Copy to clipboard",children:p?e.jsx(b,{className:"h-4 w-4 text-green-600"}):e.jsx(A,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share this link with temporary users to give them access"})]}),e.jsx(n,{variant:"outline",onClick:()=>{m("/")},className:"w-full",children:"Go to app"})]})]})})})})})})}export{z as default};
