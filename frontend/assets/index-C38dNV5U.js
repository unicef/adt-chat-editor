import{r as o,u as N,a as v,j as e,t}from"./index-DTf288xY.js";import{c as w,L as m,I as u,B as b,A as y}from"./AxiosInstance-CSILGNeQ.js";import{C as L,a as C}from"./card-DNNhlwbE.js";function A(){const[n,x]=o.useState(""),[l,g]=o.useState(""),[a,i]=o.useState(!1),h=N(),{login:p}=v(),f=async s=>{var c,d;if(s.preventDefault(),!n||!l){t.error("Please fill in all fields");return}i(!0);try{const r=await y.post("/auth/login",{username:n,password:l});r.data.access_token?(p(r.data.access_token),t.success("Login successful"),h("/generate-token")):t.error("No token received")}catch(r){const j=((d=(c=r.response)==null?void 0:c.data)==null?void 0:d.message)||"Login has failed. Please try again.";t.error(j)}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsx("div",{className:w("flex flex-col gap-6","w-full max-w-md"),children:e.jsx(L,{className:"overflow-hidden",children:e.jsx(C,{className:"p-0",children:e.jsx("form",{className:"p-6 md:p-8",onSubmit:f,children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Welcome back"}),e.jsx("p",{className:"text-muted-foreground text-balance",children:"Login to your admin account"})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(m,{htmlFor:"username",children:"Username"}),e.jsx(u,{id:"username",name:"username",type:"text",placeholder:"Enter your username",value:n,className:"bg-white",onChange:s=>x(s.target.value),disabled:a,required:!0})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(u,{id:"password",name:"password",type:"password",placeholder:"Enter your password",value:l,className:"bg-white",onChange:s=>g(s.target.value),disabled:a,required:!0})]}),e.jsx(b,{type:"submit",className:"w-full",disabled:a,children:a?"Signing in...":"Login"})]})})})})})})}export{A as default};
